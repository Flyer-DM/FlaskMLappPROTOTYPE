<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Страница для создания новой модели</title>
    <link rel="stylesheet" type="text/css" href="/static/styles/general.css" />
    <link rel="stylesheet" type="text/css" href="/static/styles/new_model.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
</head>
<body>
<form action="/logout" method="get">
    <div id="logout-form">
        <input type="submit" id="logout-button" value="Выйти">
        <p>{{ name }}</p>
        <p>{{ surname }}</p>
    </div>
</form>
<div class="d-flex flex-column align-items-center">
    <h1>Создание модели</h1>
    {% if state is undefined %}
        {% if saved is defined %}
            <p class="first_p">Модель сохранена!</p>
        {% endif %}
        <form action="/index" method="get">
            <input type="submit" value="На главную">
        </form>
        <form action="/new_model_page/0" method="post">
            <input type="submit" value="Создать новую модель">
        </form>
        <h2>Или</h2>
        <p>Продолжить создание незавершённой модели</p>
        <div class="container">
            <label for="customSelect">Незавершённые модели:</label>
            <ul id="customSelect">
                {% for model in all_models %}
                    <li><a href="/new_model_continue/{{ model.id }}"><b>"{{ model.name }}"</b> для ТП <b>{{ model.profession if model.profession else 'не указана' }}</b> создана <b>{{ model.author_id.last_name }} {{ model.author_id.first_name }}</b> <b>{{ model.updated_on }}</b>. Метод: <b>{{ model.method_id.name if model.method_id.name else 'не указан' }}</b>. Последнее изменение: <b>{{ model.updated_on }}</b> внесено <b>{{ model.last_changed_user.last_name }} {{ model.last_changed_user.first_name }}</b>. Статус модели: <b>{{ model.state }}</b>. Переобучена раз: <b>{{ model.retrained }}</b>.</a></li>
                {% endfor %}
            </ul>
        </div>
    {% elif state == 0 %}
        <form action="/new_model_page" method="get">
            <input type="submit" value="Назад">
        </form>
        <form action="/new_model_page/1" method="post" id="form-state-0">
            <label value="Название модели">
                <p>Название модели</p>
                <input type="text" name="model_name" required>
            </label>
            <label value="Описание модели" for="model_description">
                <p>Описание модели</p>
                <textarea type="text" class="form-control form-control-lg" name="model_description"
                          oninput="document.querySelector('input#id').value = this.value;"
                          id="model_description"></textarea>
            </label>
            <label value="Автор">
                <p>Автор</p>
                <input type="text" disabled value="{{ surname }} {{ name }}" id="author">
            </label>
            <input type="submit" name="continue" value="Продолжить">
            <input type="submit" name="continue" value="Сохранить и закрыть">
        </form>
    {% endif %}
{#    <input type="submit" value="Список процессов">#}
{#    <input type="submit" value="Продолжить обучение">#}
{#    <p>Список типовых позиций и специализаций:</p>#}
{#    <form action="nnnn" method="post">#}
{#        <select name="profession">#}
{#                <option>Позиция 1</option>#}
{#                <option>Позиция 2</option>#}
{#                <option>Позиция 3</option>#}
{#        </select>#}
{#        <input type="submit" value="Выбрать">#}
{#    </form>#}
{#    <form action="nnnn" method="get">#}
{#        <input type="submit" value="Вернуться назад">#}
{#    </form>#}
{##}
{##}
{#    <p class="text-info-main">Выберите слепок данных:</p>#}
{##}
{#    <form action="new-data" method="post">#}
{#        <select name="data">#}
{#                <option>Данные 1</option>#}
{#                <option>Данные 2</option>#}
{#                <option>Данные 3</option>#}
{#        </select>#}
{#        <input type="submit" value="Выбрать">#}
{#    </form>#}
{#    <p class="text-info-main">Или загрузите новый слепок данных:</p>#}
{#    <input type="file" name="file" required/>#}
{#    <input type="submit" value="Загрузить данные">#}
{#    <input type="submit" value="Проверить данные">#}
{##}
{#    <p class="text-info-main">Выберите метод моделирования:</p>#}
{##}
{#    <form action="new-data" method="post">#}
{#        <select name="data">#}
{#                <option>Метод 1</option>#}
{#                <option>Метод 2</option>#}
{#                <option>Метод 3</option>#}
{#        </select>#}
{#        <input type="submit" value="Сохранить">#}
{#    </form>#}
{#    <input type="submit" value="Вернуться назад">#}
{#    <p>Выберите параметры модели:</p>#}
{#    <p>Профессия:</p>#}
{#    <p>{{ profession }}</p>#}
{#    <p>Модель:</p>#}
{#    <p>{{ model }}</p>#}
{#    <form action="/upload-dataset" method="post" enctype="multipart/form-data">#}
{#        <input type="hidden" name="profession" value="{{ profession }}">#}
{#        <input type="hidden" name="model" value="{{ model }}">#}
{#        <label value="Количество эпох">#}
{#            <p>Количество эпох:</p>#}
{#            <input type="number" name="epochs" value="1000" required min="1">#}
{#        </label>#}
{#        <label value="Ранняя остановка">#}
{#            <p>Ранняя остановка:</p>#}
{#            <input type="number" name="early_stop" value="100" required min="1">#}
{#        </label>#}
{#        <label value="Разбиение train/test (процент тестовых данных)">#}
{#            <p>Разбиение train/test:</p>#}
{#            <input type="number" name="train_test" value="0.25" required min="0.01" max="1" step="0.01">#}
{#        </label>#}
{#        <label value="learning rate">#}
{#            <p>Скорость обучения:</p>#}
{#            <input type="number" name="learning_rate" value="0.03" required step="0.01">#}
{#        </label>#}
{#        <label value="depth">#}
{#            <p>Глубина модели:</p>#}
{#            <input type="number" name="depth" value="6" required min="1" max="16">#}
{#        </label>#}
{#        <input type="file" name="file" required/>#}
{#        <input type="submit" value="Обучить модель">#}
{#    </form>#}
{##}
{#    <p class="text-info-main">Выберите параметры конфигурации Виртуальной машины для обучения модели:</p>#}
{#    <label value="param1">#}
{#        <p>Параметр 1:</p>#}
{#        <input type="number" name="param1" value="0.02">#}
{#    </label>#}
{#    <label value="param2">#}
{#        <p>Параметр 2:</p>#}
{#        <input type="number" name="param2" value="7">#}
{#    </label>#}
{#    <label value="param3">#}
{#        <p>Параметр 3:</p>#}
{#        <input type="number" name="param3" value="23">#}
{#    </label>#}
{#    <input type="submit" value="Сохранить">#}
{#    <input type="submit" value="Обучить модель">#}
{##}
{#    <p>Полученные метрики модели:</p>#}
{#    <p>Метрика 1:</p>#}
{#    <p>{{ metric1 }}</p>#}
{#    <p>Метрика 2:</p>#}
{#    <p>{{ metric2 }}</p>#}
{#    <input type="submit" value="Сохранить">#}
{##}
{#    <p>ФОРМА ДЛЯ НАСТРОЙКИ ПАРАМЕТРОВ АЛГОРИТМА КОРРЕКТИРОВКИ (в разработке):</p>#}
{#    <input type="submit" value="Сохранить">#}
{#    <input type="submit" value="Вернуться назад">#}
{#    <input type="submit" value="Запустить корректировку">#}
{#    <p>progressbar</p>#}
{##}
{#    <p>Обновлённые метрики модели:</p>#}
{#    <p>Метрика 1:</p>#}
{#    <p>{{ metric1 }}</p>#}
{#    <p>Метрика 2:</p>#}
{#    <p>{{ metric2 }}</p>#}
{#    <input type="submit" value="Сохранить">#}
{##}
{#    <input type="submit" value="Сохранить в хранилище">#}
{##}
{#    <form action="/index" method="get" style="margin-bottom: 50px;">#}
{#        <input type="submit" value="Финализировать и закрыть">#}
{#    </form>#}
</div>
</body>
</html>