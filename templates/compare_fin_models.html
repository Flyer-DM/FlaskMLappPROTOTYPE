<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Сравнение финализированных моделей</title>
    <link rel="stylesheet" type="text/css" href="/static/styles/general.css" />
    <link rel="stylesheet" type="text/css" href="/static/styles/compare_fin_models.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
</head>
<body>
<form action="/logout" method="get">
    <div id="logout-form">
        <input type="submit" id="logout-button" value="Выйти">
        <p>{{ name }}</p>
        <p>{{ surname }}</p>
    </div>
</form>
<div class="d-flex flex-column align-items-center">
{% if result is undefined %}
    <form action="/index" method="get">
        <input type="submit" value="Вернуться назад">
    </form>
    <p>Список доступных финализированных моделей:</p>
    <div class="container">
        <button id="submitButton">Сравнить</button>
        <label for="customSelect">Выберите модели для сравнения (макс. 5):</label>
        <ul id="customSelect">
            <li data-value="model 1">model 1</li>
            <li data-value="model 2">model 2</li>
        </ul>
    </div>

    <script lang="javascript">
        document.addEventListener('DOMContentLoaded', function () {
            const customSelect = document.getElementById('customSelect');
            const selectedValues = document.getElementById('selectedValues');
            const submitButton = document.getElementById('submitButton');
            const hiddenSelectedValues = document.getElementById('hiddenSelectedValues');
            const maxSelections = 5;

            customSelect.addEventListener('click', function (event) {
                const clickedItem = event.target;

                if (clickedItem.tagName.toLowerCase() === 'li') {
                    const selectedItems = customSelect.querySelectorAll('.selected');

                    if (clickedItem.classList.contains('selected')) {
                        clickedItem.classList.remove('selected');
                    } else {
                        if (selectedItems.length <= maxSelections) {
                            clickedItem.classList.add('selected');
                        } else {
                            alert(`Можно выбрать не более ${maxSelections} значений!`);
                        }
                    }

                    const updatedSelectedItems = customSelect.querySelectorAll('.selected');
                    selectedValues.textContent = `Выбрано: ${updatedSelectedItems.length}`;
                }
            });

            submitButton.addEventListener('click', function () {
                const selectedItems = customSelect.querySelectorAll('.selected');
                const values = Array.from(selectedItems).map(item => item.getAttribute('data-value'));
                hiddenSelectedValues.value = values.join(',');

                document.getElementById('selectionForm').submit();
            });
        });
    </script>
    <form id="selectionForm" method="POST" action="compare-fin-models">
        <input type="hidden" name="selectedValues" id="hiddenSelectedValues">
    </form>


{% endif %}
{% if result is defined %}
    <form action="/compare-fin-models" method="get">
        <input type="submit" value="Вернуться назад">
    </form>
    <p>Сравнение характеристик:</p>
    <table>
        <thead>
            <tr>
                <th></th>
                <th>model 1</th>
                <th>model 2</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Метрика 1</td>
                <td>Значение 1</td>
                <td>Значение 2</td>
            </tr>
            <tr>
                <td>Метрика 2</td>
                <td>Значение 1</td>
                <td>Значение 2</td>
            </tr>
            <tr>
                <td>Метрика n</td>
                <td>Значение 1</td>
                <td>Значение 2</td>
            </tr>
        </tbody>
    </table>
{% endif %}
</div>
</body>
</html>